# RGO Book Downloader

Скрипты для автоматической загрузки книг с сайта Электронной библиотеки Русского географического общества (elib.rgo.ru) и конвертации их в PDF.

## ⚠️ ОТКАЗ ОТ ОТВЕТСТВЕННОСТИ

**ВАЖНО:** Данные скрипты предназначены только для образовательных и исследовательских целей. 

- Используйте скрипты только для личного пользования
- Соблюдайте авторские права и условия использования сайта elib.rgo.ru
- Не распространяйте загруженный контент без разрешения правообладателей
- Авторы скрипта не несут ответственности за любое неправомерное использование
- Пользователь самостоятельно отвечает за соблюдение законодательства

**Скачивайте только те материалы, на которые у вас есть право доступа!**

## Возможности

- Загрузка всех страниц книги в формате PNG
- Возможность докачки с определенной страницы
- Автоматическое объединение страниц в PDF файл
- Надежная обработка ошибок и ожидание загрузки

## Установка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/YOUR_USERNAME/rgo-book-downloader.git
cd rgo-book-downloader
```

2. Установите зависимости:
```bash
npm install
```

## Использование

### 1. Загрузка книги

```bash
# Загрузить всю книгу
node download-book.js "URL_КНИГИ"

# Начать с определенной страницы
node download-book.js "URL_КНИГИ" 50

# Сохранить в определенную папку
node download-book.js "URL_КНИГИ" 1 my_book_folder
```

**Пример:**
```bash
node download-book.js "https://elib.rgo.ru/safe-view/123456789/228900/1/MTgyMDA..." 1
```

### 2. Конвертация в PDF

```bash
# Создать PDF из загруженных изображений
node convert-to-pdf.js

# Указать папку и имя файла
node convert-to-pdf.js downloaded_book my_book.pdf
```

## Структура файлов

```
rgo-book-downloader/
├── download-book.js      # Основной скрипт загрузки
├── convert-to-pdf.js     # Скрипт конвертации в PDF
├── package.json          # Зависимости Node.js
├── README.md            # Документация
└── downloaded_book/     # Папка с загруженными изображениями (создается автоматически)
    ├── page_0001.png
    ├── page_0002.png
    └── ...
```

## Зависимости

- **playwright** - для автоматизации браузера
- **pdfkit** - для создания PDF файлов
- **sharp** - для обработки изображений

## Как это работает

1. **download-book.js** открывает страницу книги в браузере Chromium
2. Ждет полной загрузки всех изображений на странице
3. Определяет общее количество страниц из интерфейса сайта
4. Последовательно переходит по страницам и сохраняет изображения
5. **convert-to-pdf.js** объединяет все PNG файлы в один PDF документ

## Особенности

- Автоматическое ожидание загрузки изображений
- Правильная нумерация страниц без дублирования
- Возможность докачки прерванных загрузок
- Сохранение оригинального качества изображений
- Создание PDF с сохранением размеров страниц

## Устранение неполадок

### Браузер не запускается
```bash
# Установите зависимости браузера
npx playwright install chromium
```

### Скрипт завершается с ошибкой
- Проверьте правильность URL книги
- Убедитесь что книга доступна для просмотра
- Проверьте интернет-соединение

### PDF не создается
- Убедитесь что в папке есть PNG файлы
- Проверьте права на запись в директории

## Лицензия

MIT License - см. файл LICENSE для подробностей.

## Вклад в проект

Приветствуются улучшения и исправления! Создавайте Issues и Pull Requests.

---

**Помните:** Уважайте авторские права и используйте скрипт ответственно!